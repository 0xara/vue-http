var VueHttp=function(e,t,n,r,a,o,u){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"isFormData",value:function(e){return"undefined"!=typeof FormData&&e instanceof FormData}},{key:"hasFiles",value:function(e){return Object.keys(e).some((function(t){return e[t]instanceof File||e[t]instanceof FileList}))}},{key:"prepareMethodType",value:function(t){var n=t.method?t.method.toLowerCase():t.method;return"put"!==n&&"patch"!==n?t:(e.isFormData(t.data)?t.data.append("_method",n):t.data._method=n,t.method="POST",t)}},{key:"objectToFormData",value:function(e){return a(e)}},{key:"urlGenerator",value:function(e,t){return e.replace(/\/$/,"")+"/"+(t=t.replace(/^\//,""))}}]),e}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function p(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=e.prepareSettings(t)}return l(e,[{key:"handle",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.$;return n?new Promise((function(r,a){n.ajax(t.options).done((function(e,n,a){r({data:e,status:a.status,statusText:n,headers:a.getAllResponseHeaders(),config:t.options,request:a})})).fail((function(n,r,u){var i=new Error(r);i.config=t.options,"timeout"==r&&(i.request=n),e.requestHasStatusFromServer(n.status)&&(i.request=n,i.response={data:o.tryParseJson(n.responseText),status:n.status,headers:n.getAllResponseHeaders()}),a(i)}))})):this.importJqueryAndHandle()}},{key:"importJqueryAndHandle",value:function(){var e=this;return import("jquery").then((function(t){return window.$=t,e.handle(t)})).catch((function(e){}))}}],[{key:"prepareSettings",value:function(t){var n=t.method,a=void 0===n?"get":n,o=t.url,u=t.data,i=void 0===u?{}:u,l=t.responseType,f=void 0===l?"json":l,h=p(t,["method","url","data","responseType"]),v=e.handleXhr(h),d=c({type:a,url:o,data:e.prepareData(i),dataType:f},v);return s.isFormData(d.data)&&r.extend(d,{cache:!1,contentType:!1,processData:!1}),d}},{key:"prepareData",value:function(e){return s.isFormData(e)?e:window.File&&s.hasFiles(e)?s.objectToFormData(e):e}},{key:"requestHasStatusFromServer",value:function(e){return e>0}},{key:"handleXhr",value:function(e){var t=e.onUploadProgress,n=p(e,["onUploadProgress"]);return t?(n.xhr=function(){var e=new window.XMLHttpRequest;return t&&e.upload.addEventListener("progress",t,!1),e},n):n}}]),e}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=e.prepareSettings(t)}return v(e,[{key:"handle",value:function(){var t=this;return import("whatwg-fetch").then((function(){return new Promise((function(n,r){fetch(t.options.url,t.options).then(g).then((function(e){e.text().then((function(r){n({data:o.tryParseJson(r),status:e.status,statusText:e.statusText,headers:e.headers,config:t.options,request:e})}))})).catch((function(n){var a=new Error(n.message);a.config=t.options,n.response||"timeout"!==n.message||(a.request={}),n.response&&e.requestHasStatusFromServer(n.response.status)?n.response.text().then((function(e){a.request={status:n.response.status},a.response={data:o.tryParseJson(e),status:n.response.status,headers:n.response.headers},r(a)})):r(a)}))}))}))}}],[{key:"prepareSettings",value:function(t){var n=t.method,r=void 0===n?"GET":n,a=t.url,o=t.data,u=void 0===o?{}:o,i=t.responseType,c=void 0===i?"json":i,l=t.withCredentials,p=void 0===l?"same-origin":l,f=d(t,["method","url","data","responseType","withCredentials"]),v=e.handleXhr(f),y=h({method:r,url:e.prepareUrl(r,a,u),body:e.prepareData(r,u)},v);return y.headers=h({},y.headers||{},e.prepareDataType(c)),y.credentials=p,s.isFormData(y.body)&&delete y.headers["Content-Type"],y}},{key:"prepareData",value:function(e,t){if("GET"!==e)return s.isFormData(t)?t:window.File&&s.hasFiles(t)?s.objectToFormData(t):JSON.stringify(t)}},{key:"prepareUrl",value:function(e,t,n){return"GET"!==e?t:t+"?"+u.encodeQueryData(n)}},{key:"requestHasStatusFromServer",value:function(e){return e>0}},{key:"handleXhr",value:function(e){e.onUploadProgress;var t=d(e,["onUploadProgress"]);return t}},{key:"prepareDataType",value:function(e){switch(e){case"json":return{"Content-Type":"application/json",Accept:"application/json, text/javascript, */*; q=0.01"};default:return{}}}}]),e}();function g(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=e.prepareSettings(t)}return j(e,[{key:"handle",value:function(){var t=this;return import("unfetch").then((function(n){var r=n.default;return new Promise((function(n,a){r(t.options.url,t.options).then(k).then((function(e){e.text().then((function(r){n({data:o.tryParseJson(r),status:e.status,statusText:e.statusText,headers:e.headers,config:t.options,request:e})}))})).catch((function(n){var r=new Error(n.message);r.config=t.options,n.response||"timeout"!==n.message||(r.request={}),n.response&&e.requestHasStatusFromServer(n.response.status)?n.response.text().then((function(e){r.request={status:n.response.status},r.response={data:o.tryParseJson(e),status:n.response.status,headers:n.response.headers},a(r)})):a(r)}))}))}))}}],[{key:"prepareSettings",value:function(t){var n=t.method,r=void 0===n?"GET":n,a=t.url,o=t.data,u=void 0===o?{}:o,i=t.responseType,c=void 0===i?"json":i,l=w(t,["method","url","data","responseType"]),p=e.handleXhr(l),f=m({method:r,url:e.prepareUrl(r,a,u),body:e.prepareData(r,u)},p);return f.headers=m({},f.headers||{},e.prepareDataType(c)),f.credentials="include",s.isFormData(f.body)&&delete f.headers["Content-Type"],f}},{key:"prepareData",value:function(e,t){if("GET"!==e)return s.isFormData(t)?t:window.File&&s.hasFiles(t)?s.objectToFormData(t):JSON.stringify(t)}},{key:"prepareUrl",value:function(e,t,n){return"GET"!==e?t:t+"?"+u.encodeQueryData(n)}},{key:"requestHasStatusFromServer",value:function(e){return e>0}},{key:"handleXhr",value:function(e){e.onUploadProgress;var t=w(e,["onUploadProgress"]);return t}},{key:"prepareDataType",value:function(e){switch(e){case"json":return{"Content-Type":"application/json",Accept:"application/json, text/javascript, */*; q=0.01"};default:return{}}}}]),e}();function k(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}var x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var O={jqueryDriver:f,fetchDriver:y,unfetchDriver:b},S=[],P=[],F=[],T=[],D=[],E=[],q=[],A={},C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.onunhandledrejection=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}}return x(e,null,[{key:"allProcessing",get:function(){return S}},{key:"ajaxStopFunctions",get:function(){return P}},{key:"ajaxStartFunctions",get:function(){return F}},{key:"ajaxSuccessFunctions",get:function(){return T}},{key:"ajaxErrorFunctions",get:function(){return D}},{key:"ajaxSendFunctions",get:function(){return E}},{key:"ajaxCompleteFunctions",get:function(){return q}},{key:"defaults",get:function(){return A},set:function(e){A=e}}]),x(e,[{key:"getSettings",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.prepareSettings(this.options);return t?r[t]||n:r}},{key:"handle",value:function(){e.insertProcessToQueue(this);var t=new O[this.driver+"Driver"](this.getSettings());return this.handler=t.handle()}},{key:"submit",value:function(){var e=this;return this.handle().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.resolve(!0,t),t.instance=e,t})).catch((function(t){throw e.resolve(!0,t),t.instance=e,t}))}},{key:"resolve",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments[1];this.resolved=t,t&&(e.applyAjaxComplete(this,n),n instanceof Error?e.applyAjaxError(this,n):e.applyAjaxSuccess(this,n),e.removeProcessToQueue(this))}}],[{key:"prepareSettings",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.extend(!0,{},e.defaults,t);return n.method&&(n.method=n.method.toUpperCase()),n.url&&n.baseUrl&&(n.url=s.urlGenerator(n.baseUrl,n.url)),s.prepareMethodType(n)}},{key:"applyAjaxStop",value:function(){e.ajaxStopFunctions.forEach((function(e){e()}))}},{key:"applyAjaxStart",value:function(){e.ajaxStartFunctions.forEach((function(e){e()}))}},{key:"applyAjaxSuccess",value:function(t,n){e.ajaxSuccessFunctions.forEach((function(e){e(t,n)}))}},{key:"applyAjaxError",value:function(t,n){e.ajaxErrorFunctions.forEach((function(e){e(t,n)}))}},{key:"applyAjaxSend",value:function(t){e.ajaxSendFunctions.forEach((function(e){e(t)}))}},{key:"applyAjaxComplete",value:function(t,n){e.ajaxCompleteFunctions.forEach((function(e){e(t,n)}))}},{key:"insertProcessToQueue",value:function(t){-1==e.allProcessing.indexOf(t)&&(e.applyAjaxSend(t),0==e.allProcessing.length&&e.applyAjaxStart(),e.allProcessing.push(t))}},{key:"removeProcessToQueue",value:function(t){var n=e.allProcessing.indexOf(t);-1!=n&&(e.allProcessing.splice(n,1),0==e.allProcessing.length&&e.applyAjaxStop())}}]),e}(),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.setOptions(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),U(t,[{key:"setOptions",value:function(e){var t=e.name,n=void 0===t?"":t,r=e.driver,a=void 0===r?"":r,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["name","driver"]);return this.name=n,this.driver=a,this.options=_({},o,{driver:a}),this}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(new t).setOptions(_({method:"get",url:e,data:n},r)).submit()}},{key:"post",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(new t).setOptions(_({method:"post",url:e,data:n},r)).submit()}},{key:"put",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(new t).setOptions(_({method:"put",url:e,data:n},r)).submit()}},{key:"patch",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(new t).setOptions(_({method:"patch",url:e,data:n},r)).submit()}},{key:"delete",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(new t).setOptions(_({method:"delete",url:e,data:n},r)).submit()}},{key:"submit",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var u=a.get;return void 0!==u?u.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"submit",this).call(this)}},{key:"then",value:function(e){var t=this;return this.handler.then((function(n){var r=e(n);if(t.resolve(!r,n),r)return r})),this}},{key:"done",value:function(e){var t=this;return this.handler.then((function(n){e(n),t.resolve(!0,n)})),this}},{key:"catch",value:function(e){var t=this;return this.handler.catch((function(n){var r=e(n);if(r)return r;t.resolve(!0,n)})),this}},{key:"fail",value:function(e){var t=this;return this.handler.catch((function(n){e(n),t.resolve(!0,n)})),this}},{key:"always",value:function(e){return this.handler.then((function(t){return e(t)||t})),this.handler.catch((function(t){var n=e(t);if(n)return n;throw t})),this}}],[{key:"ajaxSetup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C.defaults=e}},{key:"ajaxStop",value:function(e){C.ajaxStopFunctions.push(e)}},{key:"ajaxStart",value:function(e){C.ajaxStartFunctions.push(e)}},{key:"ajaxSuccess",value:function(e){C.ajaxSuccessFunctions.push(e)}},{key:"ajaxError",value:function(e){C.ajaxErrorFunctions.push(e)}},{key:"ajaxSend",value:function(e){C.ajaxSendFunctions.push(e)}},{key:"ajaxComplete",value:function(e){C.ajaxCompleteFunctions.push(e)}}]),t}(C),J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function G(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.prototype.$http=new H,H.ajaxSetup(J({},r,"function"==typeof a?a():a)),e.mixin({methods:{ajax:function(e){return new H(e).submit()},jax:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.ajax(J({url:e,method:t,data:n},r))},jaxValidationErrors:function(e){var n=e.request,r=e.response,a=void 0===r?{}:r;if(n&&(422===n.status||400===n.status)){var o=a.data.errors;return t.isArray(o)?{}:o}return{}},jaxIsValid:function(e,r){var a=this.jaxValidationErrors(e);return!t.isArray(a)&&(!!n.hasOwnProperty(a,r)&&a[r])}}})}var V={install:G},X=null;return"undefined"!=typeof window?X=window.Vue:"undefined"!=typeof global&&(X=global.Vue),X&&X.use(V),H.install=G,e.default=H,e}({},isArray,hasOwnProperty,extend,_objectToFormData,tryParseJson,queryStringParameter);
